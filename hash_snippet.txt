 unsigned char* digest;
 unsigned int digestlen;
 EVP_MD_CTX* ctx;
 
 //buffer allocation for the digest
 digest = (unsigned char*)malloc(EVP_MD_size(EVP_sha256()));

 //context allocation new()
 ctx=EVP_MD_CTX_new();
 
 //Hashing (init+single up+finalization)
 EVP_DigestInit(ctx,EVP_sha256());
 EVP_DigestUpdate(ctx,(unsigned char*)skey,skeylen);
 EVP_DigestFinal(ctx,digest,&digestlen);

 //contect deallocation free()
 EVP_MD_CTX_free(ctx);

 BIO_dump_fp (stdout, (const char*)digest ,digestlen); 
